---
layout: post
title: SSH VPS
---

## SSH

### [Generate SSH Key](https://www.vultr.com/docs/how-do-i-generate-ssh-keys)

```
`ssh-keygen -t rsa -b 4096`
`cat ~/.ssh/id_rsa.pub` backup
`ssh-copy-id user@<host>`
`ssh -i /path/to/id_rsa user@x.x.x.x`
```

### [SSH Basic Usage Secure Shell](https://abcdabcd987.com/ssh/)

## VPS

- Test downloads speed.

## BBR

```
# wget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.sh
# chmod +x bbr.sh
# ./bbr.sh
```

```
`uname -r`
`sysctl net.ipv4.tcp_available_congestion_control`
`sysctl net.ipv4.tcp_congestion_control`
`sysctl net.core.default_qdisc`
`lsmod | grep bbr`
```


## ShadowsocksR

- [ShadowsocksX-NG](https://github.com/shadowsocks/ShadowsocksX-NG/releases)
- [Android](https://github.com/shadowsocks/shadowsocks-android/releases)

```
# wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh
# chmod +x shadowsocksR.sh
# ./shadowsocksR.sh 2>&1 | tee shadowsocksR.log
```

```
`/etc/init.d/shadowsocks start`
`/etc/init.d/shadowsocks stop`
`/etc/init.d/shadowsocks restart`
`/etc/init.d/shadowsocks status`
```

```
配置文件路径：/etc/shadowsocks.json
日志文件路径：/var/log/shadowsocks.log
代码安装目录：/usr/local/shadowsocks
Uninstall: ./shadowsocksR.sh uninstall
```

![](http://upload-images.jianshu.io/upload_images/9485-b0d99d196d019ec3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
[Why](http://vc2tea.com/whats-shadowsocks/)

### 连接 VPS
- Windows: SSH 客户端（Tunnelier）; Mac: SSH 客户端(Issh): `ssh root@<host>`.
- 白热喂，不管 VPS 事先是否已经安装了 VPN，都可以把 VPS 作为 SSH 代理，不影响 VPN 的使用。

### 技巧：
分享同一个 SSH 代理， 四步新建一受限 VPS 用户:
1. 登录 VPS: `SSH root@<host>`

2. 创建一个用户组：`groupadd hahaha`  //“hahaha”可替换成任意名字。

3. 创建受限用户：`useradd -d /home/dotcom -m -g hahaha -s /bin/false dotcom`
以上命令将会在 "hahaha" 创建一个新的 SSH 用户 "dotcom"，该用户只能使用 SSH 代理，不能登录你的 VPS 帐户。
